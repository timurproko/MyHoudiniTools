<?xml version="1.0" encoding="UTF-8"?>
<menuDocument>
        <menu>
                <scriptMenuStripDynamic id="my_desktop_strip">
                <insertAtIndex>0</insertAtIndex>
                <contentsScriptCode>
<![CDATA[
import mytools
menu_items = []
for name in mytools.get_desktop_names():
    menu_items.extend([name, name])
return menu_items
]]>
                </contentsScriptCode>
                
                <scriptCode>
<![CDATA[
import mytools
selected_desktop = kwargs["selectedtoken"]
desktop = mytools.get_desktop_by_name(selected_desktop)
if desktop:
    desktop.setAsCurrent()
    mytools.toggle_stowbars(1)
    mytools.toggle_stowbars(0)
    mytools.update_keymap()
]]>
                </scriptCode>
                </scriptMenuStripDynamic>
                <removeItem id="desktop_strip"/>

</menu>
</menuDocument>



                <!-- <scriptItem id="reload_cur_desktop">
                <label>Reload Current Desktop</label>
                <insertAfter>‹h.save_desktops</insertAfter> -->
<!-- <scriptCode>
<![CDATA[
import mytools, hdefereval
def showStowbars():
        mytools.toggle_stowbars(1)
hdefereval.executeDeferred(showStowbars)

def hideStowbars():
        mytools.toggle_stowbars(0)
hdefereval.executeDeferred(hideStowbars)

mytools.update_keymap()

]]>
</scriptCode>
                </scriptItem> -->