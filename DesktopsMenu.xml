<?xml version="1.0" encoding="UTF-8"?>
<menuDocument>
        <menu>
                <scriptMenuStripDynamic id="my_desktop_strip">
                <insertAtIndex>0</insertAtIndex>
                <contentsScriptCode>
<![CDATA[
import mytools
menu_items = []
for name in mytools.get_desktop_names():
    menu_items.extend([name, name])
return menu_items
]]>
                </contentsScriptCode>
                
                <scriptCode>
<![CDATA[
import mytools
selected_desktop = kwargs["selectedtoken"]
desktop = mytools.get_desktop_by_name(selected_desktop)
if desktop:
    desktop.setAsCurrent()
    mytools.update_keymap()
]]>
                </scriptCode>
                </scriptMenuStripDynamic>
                <removeItem id="desktop_strip"/>

</menu>
</menuDocument>