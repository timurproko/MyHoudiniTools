<?xml version="1.0" encoding="UTF-8"?>
<menuDocument>
        <menu>
                <scriptMenuStripDynamic id="my_desktop_strip">
                <insertAtIndex>0</insertAtIndex>
                <contentsScriptCode>
<![CDATA[
import mytools
current = mytools.get_current_desktop_name()
menu_items = []
for name in mytools.get_desktop_names_cached():
    # Visual "radio" indicator (filled for current desktop)
    label = ("● " if name == current else "○ ") + name
    menu_items += [name, label]
return menu_items
]]>
                </contentsScriptCode>
                
                <scriptCode>
<![CDATA[
import mytools
selected_desktop = kwargs["selectedtoken"]
did_switch = mytools.set_desktop_current(selected_desktop)
if did_switch:
    mytools.toggle_stowbars(1)
    mytools.toggle_stowbars(0)
    mytools.update_keymap()
]]>
                </scriptCode>
                </scriptMenuStripDynamic>
                <removeItem id="desktop_strip"/>

</menu>
</menuDocument>



                <!-- <scriptItem id="reload_cur_desktop">
                <label>Reload Current Desktop</label>
                <insertAfter>‹h.save_desktops</insertAfter> -->
<!-- <scriptCode>
<![CDATA[
import mytools, hdefereval
def showStowbars():
        mytools.toggle_stowbars(1)
hdefereval.executeDeferred(showStowbars)

def hideStowbars():
        mytools.toggle_stowbars(0)
hdefereval.executeDeferred(hideStowbars)

mytools.update_keymap()

]]>
</scriptCode>
                </scriptItem> -->